# Valid: events at root level
events {
    worker_connections 1024;
}

# Valid: http at root level with proper nesting
http {
    upstream backend {
        server 127.0.0.1:8080;
    }

    map $uri $new {
        default 0;
    }

    geo $country {
        default unknown;
    }

    server {
        listen 80;

        location / {
            root /var/www;

            if ($request_method = POST) {
                return 405;
            }
        }

        location /api {
            limit_except GET {
                deny all;
            }
        }

        location /nested {
            location /nested/child {
                root /var/www/nested;
            }
        }
    }
}
